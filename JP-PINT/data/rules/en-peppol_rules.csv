context,id,flag,test,text
cbc:EndpointID[@schemeID = '0088'] | cac:PartyIdentification/cbc:ID[@schemeID = '0088'] | cbc:CompanyID[@schemeID = '0088'],PEPPOL-COMMON-R040,fatal,"matches(normalize-space(), '^[0-9]+$') and u:gln(normalize-space())",GLN must have a valid format according to GS1 rules.
cbc:EndpointID[@schemeID = '0192'] | cac:PartyIdentification/cbc:ID[@schemeID = '0192'] | cbc:CompanyID[@schemeID = '0192'],PEPPOL-COMMON-R041,fatal,"matches(normalize-space(), '^[0-9]{9}$') and u:mod11(normalize-space())",Norwegian organization number MUST be stated in the correct format.
cbc:EndpointID[@schemeID = '0184'] | cac:PartyIdentification/cbc:ID[@schemeID = '0184'] | cbc:CompanyID[@schemeID = '0184'],PEPPOL-COMMON-R042,fatal,"(string-length(text()) = 10) and (substring(text(), 1, 2) = 'DK') and (string-length(translate(substring(text(), 3, 8), '1234567890', '')) = 0)",Danish organization number (CVR) MUST be stated in the correct format.
cbc:EmbeddedDocumentBinaryObject[@mimeCode],PEPPOL-EN16931-CL001,fatal, some $code in $MIMECODE satisfies @mimeCode = $code,Mime code must be according to subset of IANA code list.
cac:AllowanceCharge[cbc:ChargeIndicator = 'false']/cbc:AllowanceChargeReasonCode,PEPPOL-EN16931-CL002,fatal, some $code in $UNCL5189 satisfies normalize-space(text()) = $code,Reason code MUST be according to subset of UNCL 5189 D.16B.
cac:AllowanceCharge[cbc:ChargeIndicator = 'true']/cbc:AllowanceChargeReasonCode,PEPPOL-EN16931-CL003,fatal, some $code in $UNCL7161 satisfies normalize-space(text()) = $code,Reason code MUST be according to UNCL 7161 D.16B.
cac:InvoicePeriod/cbc:DescriptionCode,PEPPOL-EN16931-CL006,fatal, some $code in $UNCL2005 satisfies normalize-space(text()) = $code,Invoice period description code must be according to UNCL 2005 D.16B.
cbc:Amount | cbc:BaseAmount | cbc:PriceAmount | cbc:TaxAmount | cbc:TaxableAmount | cbc:LineExtensionAmount | cbc:TaxExclusiveAmount | cbc:TaxInclusiveAmount | cbc:AllowanceTotalAmount | cbc:ChargeTotalAmount | cbc:PrepaidAmount | cbc:PayableRoundingAmount | cbc:PayableAmount,PEPPOL-EN16931-CL007,fatal, some $code in $ISO4217 satisfies @currencyID = $code,Currency code must be according to ISO 4217:2005
cbc:EndpointID[@schemeID],PEPPOL-EN16931-CL008,fatal, some $code in $eaid satisfies @schemeID = $code,"Electronic address identifier scheme must be from the codelist ""Electronic Address Identifier Scheme"""
cbc:IssueDate | cbc:DueDate | cbc:TaxPointDate | cbc:StartDate | cbc:EndDate | cbc:ActualDeliveryDate,PEPPOL-EN16931-F001,fatal,string-length(text()) = 10 and (string(.) castable as xs:date),A date MUST be formatted YYYY-MM-DD.
cbc:InvoiceTypeCode,PEPPOL-EN16931-P0100,fatal," $profile != '01' or (some $code in tokenize('380 383 386 393 82 80 84 395 575 623 780', '\s') satisfies normalize-space(text()) = $code)",Invoice type code MUST be set according to the profile.
cbc:CreditNoteTypeCode,PEPPOL-EN16931-P0101,fatal," $profile != '01' or (some $code in tokenize('381 396 81 83 532', '\s') satisfies normalize-space(text()) = $code)",Credit note type code MUST be set according to the profile.
cac:TaxCategory[upper-case(cbc:TaxExemptionReasonCode)='VATEX-EU-G'],PEPPOL-EN16931-P0104,fatal,normalize-space(cbc:ID)='G',Tax Category G MUST be used when exemption reason code is VATEX-EU-G
cac:TaxCategory[upper-case(cbc:TaxExemptionReasonCode)='VATEX-EU-O'],PEPPOL-EN16931-P0105,fatal,normalize-space(cbc:ID)='O',Tax Category O MUST be used when exemption reason code is VATEX-EU-O
cac:TaxCategory[upper-case(cbc:TaxExemptionReasonCode)='VATEX-EU-IC'],PEPPOL-EN16931-P0106,fatal,normalize-space(cbc:ID)='K',Tax Category K MUST be used when exemption reason code is VATEX-EU-IC
cac:TaxCategory[upper-case(cbc:TaxExemptionReasonCode)='VATEX-EU-AE'],PEPPOL-EN16931-P0107,fatal,normalize-space(cbc:ID)='AE',Tax Category AE MUST be used when exemption reason code is VATEX-EU-AE
cac:TaxCategory[upper-case(cbc:TaxExemptionReasonCode)='VATEX-EU-D'],PEPPOL-EN16931-P0108,fatal,normalize-space(cbc:ID)='E',Tax Category E MUST be used when exemption reason code is VATEX-EU-D
cac:TaxCategory[upper-case(cbc:TaxExemptionReasonCode)='VATEX-EU-F'],PEPPOL-EN16931-P0109,fatal,normalize-space(cbc:ID)='E',Tax Category E MUST be used when exemption reason code is VATEX-EU-F
cac:TaxCategory[upper-case(cbc:TaxExemptionReasonCode)='VATEX-EU-I'],PEPPOL-EN16931-P0110,fatal,normalize-space(cbc:ID)='E',Tax Category E MUST be used when exemption reason code is VATEX-EU-I
cac:TaxCategory[upper-case(cbc:TaxExemptionReasonCode)='VATEX-EU-J'],PEPPOL-EN16931-P0111,fatal,normalize-space(cbc:ID)='E',Tax Category E MUST be used when exemption reason code is VATEX-EU-J
ubl-creditnote:CreditNote | ubl-invoice:Invoice,PEPPOL-EN16931-R001,fatal,cbc:ProfileID,Business process MUST be provided.
ubl-creditnote:CreditNote | ubl-invoice:Invoice,PEPPOL-EN16931-R002,fatal,count(cbc:Note) <= 1,No more than one note is allowed on document level.
ubl-creditnote:CreditNote | ubl-invoice:Invoice,PEPPOL-EN16931-R003,fatal,cbc:BuyerReference or cac:OrderReference/cbc:ID,A buyer reference or purchase order reference MUST be provided.
ubl-creditnote:CreditNote | ubl-invoice:Invoice,PEPPOL-EN16931-R004,fatal,"starts-with(normalize-space(cbc:CustomizationID/text()), 'urn:cen.eu:en16931:2017#compliant#urn:fdc:peppol.eu:2017:poacc:billing:3.0')",Specification identifier MUST have the value 'urn:cen.eu:en16931:2017#compliant#urn:fdc:peppol.eu:2017:poacc:billing:3.0'.
cbc:TaxCurrencyCode,PEPPOL-EN16931-R005,fatal,not(normalize-space(text()) = normalize-space(../cbc:DocumentCurrencyCode/text())),VAT accounting currency code MUST be different from invoice currency code when provided.
ubl-creditnote:CreditNote | ubl-invoice:Invoice,PEPPOL-EN16931-R006,fatal,(count(cac:AdditionalDocumentReference[cbc:DocumentTypeCode='130']) <= 1),Only one invoiced object is allowed on document level
ubl-creditnote:CreditNote | ubl-invoice:Invoice,PEPPOL-EN16931-R007,fatal,$profile != 'Unknown',Business process MUST be in the format 'urn:fdc:peppol.eu:2017:poacc:billing:NN:1.0' where NN indicates the process number.
//*[not(*) and not(normalize-space())],PEPPOL-EN16931-R008,fatal,false(),Document MUST not contain empty elements.
cac:AccountingCustomerParty/cac:Party,PEPPOL-EN16931-R010,fatal,cbc:EndpointID,Buyer electronic address MUST be provided
cac:AccountingSupplierParty/cac:Party,PEPPOL-EN16931-R020,fatal,cbc:EndpointID,Seller electronic address MUST be provided
ubl-invoice:Invoice/cac:AllowanceCharge | ubl-invoice:Invoice/cac:InvoiceLine/cac:AllowanceCharge | ubl-creditnote:CreditNote/cac:AllowanceCharge | ubl-creditnote:CreditNote/cac:CreditNoteLine/cac:AllowanceCharge,PEPPOL-EN16931-R040,fatal," not(cbc:MultiplierFactorNumeric and cbc:BaseAmount) or u:slack(if (cbc:Amount) then cbc:Amount else 0, (xs:decimal(cbc:BaseAmount) * xs:decimal(cbc:MultiplierFactorNumeric)) div 100, 0.02)",Allowance/charge amount must equal base amount * percentage/100 if base amount and percentage exists
ubl-invoice:Invoice/cac:AllowanceCharge[cbc:MultiplierFactorNumeric and not(cbc:BaseAmount)] | ubl-invoice:Invoice/cac:InvoiceLine/cac:AllowanceCharge[cbc:MultiplierFactorNumeric and not(cbc:BaseAmount)] | ubl-creditnote:CreditNote/cac:AllowanceCharge[cbc:MultiplierFactorNumeric and not(cbc:BaseAmount)] | ubl-creditnote:CreditNote/cac:CreditNoteLine/cac:AllowanceCharge[cbc:MultiplierFactorNumeric and not(cbc:BaseAmount)],PEPPOL-EN16931-R041,fatal,false(),Allowance/charge base amount MUST be provided when allowance/charge percentage is provided.
ubl-invoice:Invoice/cac:AllowanceCharge[not(cbc:MultiplierFactorNumeric) and cbc:BaseAmount] | ubl-invoice:Invoice/cac:InvoiceLine/cac:AllowanceCharge[not(cbc:MultiplierFactorNumeric) and cbc:BaseAmount] | ubl-creditnote:CreditNote/cac:AllowanceCharge[not(cbc:MultiplierFactorNumeric) and cbc:BaseAmount] | ubl-creditnote:CreditNote/cac:CreditNoteLine/cac:AllowanceCharge[not(cbc:MultiplierFactorNumeric) and cbc:BaseAmount],PEPPOL-EN16931-R042,fatal,false(),Allowance/charge percentage MUST be provided when allowance/charge base amount is provided.
ubl-invoice:Invoice/cac:AllowanceCharge | ubl-invoice:Invoice/cac:InvoiceLine/cac:AllowanceCharge | ubl-creditnote:CreditNote/cac:AllowanceCharge | ubl-creditnote:CreditNote/cac:CreditNoteLine/cac:AllowanceCharge,PEPPOL-EN16931-R043,fatal,normalize-space(cbc:ChargeIndicator/text()) = 'true' or normalize-space(cbc:ChargeIndicator/text()) = 'false',Allowance/charge ChargeIndicator value MUST equal 'true' or 'false'
cac:Price/cac:AllowanceCharge,PEPPOL-EN16931-R044,fatal,normalize-space(cbc:ChargeIndicator) = 'false',Charge on price level is NOT allowed. Only value 'false' allowed.
cac:Price/cac:AllowanceCharge,PEPPOL-EN16931-R046,fatal,not(cbc:BaseAmount) or xs:decimal(../cbc:PriceAmount) = xs:decimal(cbc:BaseAmount) - xs:decimal(cbc:Amount),Item net price MUST equal (Gross price - Allowance amount) when gross price is provided.
cbc:Amount | cbc:BaseAmount | cbc:PriceAmount | cac:TaxTotal[cac:TaxSubtotal]/cbc:TaxAmount | cbc:TaxableAmount | cbc:LineExtensionAmount | cbc:TaxExclusiveAmount | cbc:TaxInclusiveAmount | cbc:AllowanceTotalAmount | cbc:ChargeTotalAmount | cbc:PrepaidAmount | cbc:PayableRoundingAmount | cbc:PayableAmount,PEPPOL-EN16931-R051,fatal,@currencyID = $documentCurrencyCode,"All currencyID attributes must have the same value as the invoice currency code (BT-5), except for the invoice total VAT amount in accounting currency (BT-111)."
ubl-creditnote:CreditNote | ubl-invoice:Invoice,PEPPOL-EN16931-R053,fatal,count(cac:TaxTotal[cac:TaxSubtotal]) = 1,Only one tax total with tax subtotals MUST be provided.
ubl-creditnote:CreditNote | ubl-invoice:Invoice,PEPPOL-EN16931-R054,fatal,count(cac:TaxTotal[not(cac:TaxSubtotal)]) = (if (cbc:TaxCurrencyCode) then 1 else 0),Only one tax total without tax subtotals MUST be provided when tax currency code is provided.
ubl-creditnote:CreditNote | ubl-invoice:Invoice,PEPPOL-EN16931-R055,fatal,not(cbc:TaxCurrencyCode) or (cac:TaxTotal/cbc:TaxAmount[@currencyID=normalize-space(../../cbc:TaxCurrencyCode)] <= 0 and cac:TaxTotal/cbc:TaxAmount[@currencyID=normalize-space(../../cbc:DocumentCurrencyCode)] <= 0) or (cac:TaxTotal/cbc:TaxAmount[@currencyID=normalize-space(../../cbc:TaxCurrencyCode)] >= 0 and cac:TaxTotal/cbc:TaxAmount[@currencyID=normalize-space(../../cbc:DocumentCurrencyCode)] >= 0) ,Invoice total VAT amount and Invoice total VAT amount in accounting currency MUST have the same operational sign
"         cac:PaymentMeans[some $code in tokenize('49 59', '\s')           satisfies normalize-space(cbc:PaymentMeansCode) = $code]",PEPPOL-EN16931-R061,fatal,cac:PaymentMandate/cbc:ID,Mandate reference MUST be provided for direct debit.
ubl-creditnote:CreditNote | ubl-invoice:Invoice,PEPPOL-EN16931-R080,fatal,(count(cac:AdditionalDocumentReference[cbc:DocumentTypeCode='50']) <= 1),Only one project reference is allowed on document level
cac:InvoiceLine | cac:CreditNoteLine,PEPPOL-EN16931-R100,fatal,(count(cac:DocumentReference) <= 1),Only one invoiced object is allowed pr line
cac:InvoiceLine | cac:CreditNoteLine,PEPPOL-EN16931-R101,fatal,(not(cac:DocumentReference) or (cac:DocumentReference/cbc:DocumentTypeCode='130')),Element Document reference can only be used for Invoice line object
ubl-invoice:Invoice[cac:InvoicePeriod/cbc:StartDate]/cac:InvoiceLine/cac:InvoicePeriod/cbc:StartDate | ubl-creditnote:CreditNote[cac:InvoicePeriod/cbc:StartDate]/cac:CreditNoteLine/cac:InvoicePeriod/cbc:StartDate,PEPPOL-EN16931-R110,fatal,xs:date(text()) >= xs:date(../../../cac:InvoicePeriod/cbc:StartDate),Start date of line period MUST be within invoice period.
ubl-invoice:Invoice[cac:InvoicePeriod/cbc:EndDate]/cac:InvoiceLine/cac:InvoicePeriod/cbc:EndDate | ubl-creditnote:CreditNote[cac:InvoicePeriod/cbc:EndDate]/cac:CreditNoteLine/cac:InvoicePeriod/cbc:EndDate,PEPPOL-EN16931-R111,fatal,xs:date(text()) <= xs:date(../../../cac:InvoicePeriod/cbc:EndDate),End date of line period MUST be within invoice period.
cac:InvoiceLine | cac:CreditNoteLine,PEPPOL-EN16931-R120,fatal,"u:slack($lineExtensionAmount, ($quantity * ($priceAmount div $baseQuantity)) + $chargesTotal - $allowancesTotal, 0.02)",Invoice line net amount MUST equal (Invoiced quantity * (Item net price/item price base quantity) + Sum of invoice line charge amount - sum of invoice line allowance amount
cac:InvoiceLine | cac:CreditNoteLine,PEPPOL-EN16931-R121,fatal,not(cac:Price/cbc:BaseQuantity) or xs:decimal(cac:Price/cbc:BaseQuantity) > 0,Base quantity MUST be a positive number above zero.
cac:Price/cbc:BaseQuantity[@unitCode],PEPPOL-EN16931-R130,fatal,not($hasQuantity) or @unitCode = $quantity/@unitCode,Unit code of price base quantity MUST be same as invoiced quantity.
ubl-creditnote:CreditNote[$DKSupplierCountry = 'DK'] | ubl-invoice:Invoice[$DKSupplierCountry = 'DK'],DK-R-002,fatal,(normalize-space(cac:AccountingSupplierParty/cac:Party/cac:PartyLegalEntity/cbc:CompanyID/text()) != ''),Danish suppliers MUST provide legal entity (CVR-number)
ubl-creditnote:CreditNote[$DKSupplierCountry = 'DK' and $DKCustomerCountry = 'DK']/cac:CreditNoteLine | ubl-invoice:Invoice[$DKSupplierCountry = 'DK' and $DKCustomerCountry = 'DK']/cac:InvoiceLine,DK-R-003,warning,not((cac:Item/cac:CommodityClassification/cbc:ItemClassificationCode/@listID = 'TST') and not((cac:Item/cac:CommodityClassification/cbc:ItemClassificationCode/@listVersionID = '19.05.01') or (cac:Item/cac:CommodityClassification/cbc:ItemClassificationCode/@listVersionID = '19.0501') ) ),"If ItemClassification is provided from Danish suppliers, UNSPSC version 19.0501 should be used."
cac:AllowanceCharge[$DKSupplierCountry = 'DK' and $DKCustomerCountry = 'DK'],DK-R-004,fatal,not((cbc:AllowanceChargeReasonCode = 'ZZZ') and not((string-length(normalize-space(cbc:AllowanceChargeReason/text())) = 4) and (number(cbc:AllowanceChargeReason) >= 0) and (number(cbc:AllowanceChargeReason) <= 9999)) ),"When specifying non-VAT Taxes, Danish suppliers MUST use the AllowanceChargeReasonCode=""ZZZ"" and the 4-digit Tax category MUST be specified in 'AllowanceChargeReason'"
ubl-invoice:Invoice[$DKSupplierCountry = 'DK' and $DKCustomerCountry = 'DK']/cac:PaymentMeans,DK-R-005,fatal,"contains(' 1 10 31 42 48 49 50 58 59 93 97 ', concat(' ', cbc:PaymentMeansCode, ' '))","For Danish suppliers the following Payment means codes are allowed: 1, 10, 31, 42, 48, 49, 50, 58, 59, 93 and 97"
ubl-invoice:Invoice[$DKSupplierCountry = 'DK' and $DKCustomerCountry = 'DK']/cac:PaymentMeans,DK-R-006,fatal,not(((cbc:PaymentMeansCode = '31') or (cbc:PaymentMeansCode = '42')) and not((normalize-space(cac:PayeeFinancialAccount/cbc:ID/text()) != '') and (normalize-space(cac:PayeeFinancialAccount/cac:FinancialInstitutionBranch/cbc:ID/text()) != '')) ),For Danish suppliers bank account and registration account is mandatory if payment means is 31 or 42
ubl-invoice:Invoice[$DKSupplierCountry = 'DK' and $DKCustomerCountry = 'DK']/cac:PaymentMeans,DK-R-007,fatal,not((cbc:PaymentMeansCode = '49') and not((normalize-space(cac:PaymentMandate/cbc:ID/text()) != '') and (normalize-space(cac:PaymentMandate/cac:PayerFinancialAccount/cbc:ID/text()) != '')) ),For Danish suppliers PaymentMandate/ID and PayerFinancialAccount/ID are mandatory when payment means is 49
ubl-invoice:Invoice[$DKSupplierCountry = 'DK' and $DKCustomerCountry = 'DK']/cac:PaymentMeans,DK-R-008,fatal,"not((cbc:PaymentMeansCode = '50') and not(((substring(cbc:PaymentID, 1, 3) = '01#') or (substring(cbc:PaymentID, 1, 3) = '04#') or (substring(cbc:PaymentID, 1, 3) = '15#')) and (string-length(cac:PayeeFinancialAccount/cbc:ID/text()) = 7) ) )","For Danish Suppliers PaymentID is mandatory and MUST start with 01#, 04# or 15# (kortartkode), and PayeeFinancialAccount/ID (Giro kontonummer) is mandatory and must be 7 characters long, when payment means equals 50 (Giro)"
ubl-invoice:Invoice[$DKSupplierCountry = 'DK' and $DKCustomerCountry = 'DK']/cac:PaymentMeans,DK-R-009,fatal,"not((cbc:PaymentMeansCode = '50') and ((substring(cbc:PaymentID, 1, 3) = '04#') or (substring(cbc:PaymentID, 1, 3) = '15#')) and not(string-length(cbc:PaymentID) = 19) )","For Danish Suppliers if the PaymentID is prefixed with 04# or 15# the 16 digits instruction Id must be added to the PaymentID eg. ""04#1234567890123456"" when Payment means equals 50 (Giro)"
ubl-invoice:Invoice[$DKSupplierCountry = 'DK' and $DKCustomerCountry = 'DK']/cac:PaymentMeans,DK-R-010,fatal,"not((cbc:PaymentMeansCode = '93') and not(((substring(cbc:PaymentID, 1, 3) = '71#') or (substring(cbc:PaymentID, 1, 3) = '73#') or (substring(cbc:PaymentID, 1, 3) = '75#')) and (string-length(cac:PayeeFinancialAccount/cbc:ID/text()) = 8) ) )","For Danish Suppliers the PaymentID is mandatory and MUST start with 71#, 73# or 75# (kortartkode) and PayeeFinancialAccount/ID (Kreditornummer) is mandatory and must be exactly 8 characters long, when Payment means equals 93 (FIK)"
ubl-invoice:Invoice[$DKSupplierCountry = 'DK' and $DKCustomerCountry = 'DK']/cac:PaymentMeans,DK-R-011,fatal,"not((cbc:PaymentMeansCode = '93') and ((substring(cbc:PaymentID, 1, 3) = '71#') or (substring(cbc:PaymentID, 1, 3) = '75#')) and not((string-length(cbc:PaymentID) = 18) or (string-length(cbc:PaymentID) = 19)) )","For Danish Suppliers if the PaymentID is prefixed with 71# or 75# the 15-16 digits instruction Id must be added to the PaymentID eg. ""71#1234567890123456"" when payment Method equals 93 (FIK)"
ubl-creditnote:CreditNote[$DKSupplierCountry = 'DK' and $DKCustomerCountry = 'DK']/cac:AccountingSupplierParty/cac:Party/cac:PartyIdentification | ubl-creditnote:CreditNote[$DKSupplierCountry = 'DK' and $DKCustomerCountry = 'DK']/cac:AccountingCustomerParty/cac:Party/cac:PartyIdentification | ubl-invoice:Invoice[$DKSupplierCountry = 'DK' and $DKCustomerCountry = 'DK']/cac:AccountingSupplierParty/cac:Party/cac:PartyIdentification | ubl-invoice:Invoice[$DKSupplierCountry = 'DK' and $DKCustomerCountry = 'DK']/cac:AccountingCustomerParty/cac:Party/cac:PartyIdentification,DK-R-013,fatal,not((boolean(cbc:ID)) and (normalize-space(cbc:ID/@schemeID) = '') ),For Danish Suppliers it is mandatory to use schemeID when PartyIdentification/ID is used for AccountingCustomerParty or AccountingSupplierParty
ubl-creditnote:CreditNote[$DKSupplierCountry = 'DK'] | ubl-invoice:Invoice[$DKSupplierCountry = 'DK'],DK-R-014,fatal,not(((boolean(cac:AccountingSupplierParty/cac:Party/cac:PartyLegalEntity/cbc:CompanyID)) and (normalize-space(cac:AccountingSupplierParty/cac:Party/cac:PartyLegalEntity/cbc:CompanyID/@schemeID) != '0184')) ),"For Danish Suppliers it is mandatory to specify schemeID as ""0184"" (DK CVR-number) when PartyLegalEntity/CompanyID is used for AccountingSupplierParty"
ubl-creditnote:CreditNote[$DKSupplierCountry = 'DK'] | ubl-invoice:Invoice[$DKSupplierCountry = 'DK'],DK-R-015,fatal,"not((normalize-space(cac:AccountingSupplierParty/cac:Party/cac:PartyTaxScheme[1]/cac:TaxScheme/cbc:ID/text()) = 'VAT') and not ((string-length(cac:AccountingSupplierParty/cac:Party/cac:PartyTaxScheme[1]/cbc:CompanyID/text()) = 10) and (substring(cac:AccountingSupplierParty/cac:Party/cac:PartyTaxScheme[1]/cbc:CompanyID/text(), 1, 2) = 'DK') and (string-length(translate(substring(cac:AccountingSupplierParty/cac:Party/cac:PartyTaxScheme[1]/cbc:CompanyID/text(), 3, 8), '1234567890', '')) = 0)) or (normalize-space(cac:AccountingSupplierParty/cac:Party/cac:PartyTaxScheme[2]/cac:TaxScheme/cbc:ID/text()) = 'VAT') and not ((string-length(cac:AccountingSupplierParty/cac:Party/cac:PartyTaxScheme[2]/cbc:CompanyID/text()) = 10) and (substring(cac:AccountingSupplierParty/cac:Party/cac:PartyTaxScheme[2]/cbc:CompanyID/text(), 1, 2) = 'DK') and (string-length(translate(substring(cac:AccountingSupplierParty/cac:Party/cac:PartyTaxScheme[2]/cbc:CompanyID/text(), 3, 8), '1234567890', '')) = 0)) )","For Danish Suppliers, if specified, AccountingSupplierParty/PartyTaxScheme/CompanyID (DK VAT number) must start with DK followed by 8 digits"
ubl-creditnote:CreditNote[$DKSupplierCountry = 'DK'] | ubl-invoice:Invoice[$DKSupplierCountry = 'DK'],DK-R-016,fatal,not((boolean(/ubl-creditnote:CreditNote) and ($DKCustomerCountry = 'DK')) and (number(cac:LegalMonetaryTotal/cbc:PayableAmount/text()) < 0) ),"For Danish Suppliers, a Credit note cannot have a negative total (PayableAmount)"
/ubl-invoice:Invoice/cbc:ID[$isGreekSender] | /ubl-creditnote:CreditNote/cbc:ID[$isGreekSender],GR-R-001-1,fatal,count($IdSegments) = 6,"When the Supplier is Greek, the Invoice Id should consist of 6 segments"
/ubl-invoice:Invoice/cbc:ID[$isGreekSender] | /ubl-creditnote:CreditNote/cbc:ID[$isGreekSender],GR-R-001-2,fatal,"string-length(normalize-space($IdSegments[1])) = 9 and u:TinVerification($IdSegments[1]) and ($IdSegments[1] = /*/cac:AccountingSupplierParty/cac:Party/cac:PartyTaxScheme[cac:TaxScheme/cbc:ID = 'VAT']/substring(cbc:CompanyID, 3, 9) or $IdSegments[1] = /*/cac:TaxRepresentativeParty/cac:PartyTaxScheme[cac:TaxScheme/cbc:ID = 'VAT']/substring(cbc:CompanyID, 3, 9) )","When the Supplier is Greek, the Invoice Id first segment must be a valid TIN Number and match either the Supplier's or the Tax Representative's Tin Number"
/ubl-invoice:Invoice/cbc:ID[$isGreekSender] | /ubl-creditnote:CreditNote/cbc:ID[$isGreekSender],GR-R-001-3,fatal,"string-length(normalize-space($IdSegments[2]))>0 and matches($IdSegments[2],$dateRegExp) and ($tokenizedIdDate[1] = $tokenizedUblIssueDate[3] and $tokenizedIdDate[2] = $tokenizedUblIssueDate[2] and $tokenizedIdDate[3] = $tokenizedUblIssueDate[1])","When the Supplier is Greek, the Invoice Id second segment must be a valid Date that matches the invoice Issue Date"
/ubl-invoice:Invoice/cbc:ID[$isGreekSender] | /ubl-creditnote:CreditNote/cbc:ID[$isGreekSender],GR-R-001-4,fatal,string-length(normalize-space($IdSegments[3]))>0 and string(number($IdSegments[3])) != 'NaN' and xs:integer($IdSegments[3]) >= 0,"When Supplier is Greek, the Invoice Id third segment must be a positive integer"
/ubl-invoice:Invoice/cbc:ID[$isGreekSender] | /ubl-creditnote:CreditNote/cbc:ID[$isGreekSender],GR-R-001-5,fatal,string-length(normalize-space($IdSegments[4]))>0 and (some $c in $greekDocumentType satisfies $IdSegments[4] = $c),"When Supplier is Greek, the Invoice Id in the fourth segment must be a valid greek document type"
/ubl-invoice:Invoice/cbc:ID[$isGreekSender] | /ubl-creditnote:CreditNote/cbc:ID[$isGreekSender],GR-R-001-6,fatal,string-length($IdSegments[5]) > 0 ,"When Supplier is Greek, the Invoice Id fifth segment must not be empty"
/ubl-invoice:Invoice/cbc:ID[$isGreekSender] | /ubl-creditnote:CreditNote/cbc:ID[$isGreekSender],GR-R-001-7,fatal,string-length($IdSegments[6]) > 0 ,"When Supplier is Greek, the Invoice Id sixth segment must not be empty"
cac:AccountingSupplierParty[$isGreekSender]/cac:Party,GR-R-002,fatal,string-length(./cac:PartyName/cbc:Name)>0,Greek Suppliers must provide their full name as they are registered in the  Greek Business Registry (G.E.MH.) as a legal entity or in the Tax Registry as a natural person
cac:AccountingSupplierParty[$isGreekSender]/cac:Party/cac:PartyTaxScheme[normalize-space(cac:TaxScheme/cbc:ID) = 'VAT']/cbc:CompanyID,GR-R-003,fatal,"substring(.,1,2) = 'EL' and u:TinVerification(substring(.,3))","For the Greek Suppliers, the VAT must start with 'EL' and must be a valid TIN number"
/ubl-invoice:Invoice[$isGreekSender] | /ubl-creditnote:CreditNote[$isGreekSender],GR-R-004-1,fatal,count(cac:AdditionalDocumentReference[cbc:DocumentDescription = '##M.AR.K##'])=1,"When Supplier is Greek, there must be one MARK Number"
cac:AdditionalDocumentReference[$isGreekSender and cbc:DocumentDescription = '##M.AR.K##']/cbc:ID,GR-R-004-2,fatal,"matches(.,'^[1-9]([0-9]*)')","When Supplier is Greek, the MARK Number must be a positive integer"
cac:AccountingCustomerParty[$isGreekSender]/cac:Party,GR-R-005,fatal,string-length(./cac:PartyName/cbc:Name)>0,Greek Suppliers must provide the full name of the buyer
cac:AccountingCustomerParty[$isGreekSenderandReceiver]/cac:Party,GR-R-006,fatal,"count(cac:PartyTaxScheme[normalize-space(cac:TaxScheme/cbc:ID) = 'VAT']/cbc:CompanyID)=1 and substring(cac:PartyTaxScheme[normalize-space(cac:TaxScheme/cbc:ID) = 'VAT']/cbc:CompanyID,1,2) = 'EL' and u:TinVerification(substring(cac:PartyTaxScheme[normalize-space(cac:TaxScheme/cbc:ID) = 'VAT']/cbc:CompanyID,3))","Greek Suppliers must provide the VAT number of the buyer, if the buyer is Greek"
cac:AccountingSupplierParty[$isGreekSender]/cac:Party,GR-R-007-1,fatal, count(cac:PartyTaxScheme[normalize-space(cac:TaxScheme/cbc:ID) = 'VAT']/cbc:CompanyID) = 1 or count(/ubl-invoice:Invoice/cac:TaxRepresentativeParty) = 1,"When greek supplier does not have a VAT number, the tax representative must be present"
cac:TaxRepresentativeParty[$isGreekSender],GR-R-007-2,fatal,string-length(normalize-space(cac:PartyName/cbc:Name))>0,If the Greek Suppliers do not have Greek VAT they must provide the full name of their tax representative in Greece
cac:TaxRepresentativeParty[$isGreekSender],GR-R-007-3,fatal,"count(cac:PartyTaxScheme[normalize-space(cac:TaxScheme/cbc:ID) = 'VAT']/cbc:CompanyID)=1 and substring(cac:PartyTaxScheme[normalize-space(cac:TaxScheme/cbc:ID) = 'VAT']/cbc:CompanyID,1,2) = 'EL' and u:TinVerification(substring(cac:PartyTaxScheme[normalize-space(cac:TaxScheme/cbc:ID) = 'VAT']/cbc:CompanyID,3))","If the Greek Suppliers do not have Greek VAT, they must provide the VAT number of their tax representative"
/ubl-invoice:Invoice[$isGreekSender] | /ubl-creditnote:CreditNote[$isGreekSender],GR-R-008-2,fatal,(count(cac:AdditionalDocumentReference[cbc:DocumentDescription = '##INVOICE-URL##']) = 0 ) or (count(cac:AdditionalDocumentReference[cbc:DocumentDescription = '##INVOICE-URL##']) = 1 ),"When Supplier is Greek, there should be no more than one invoice url"
cac:AdditionalDocumentReference[$isGreekSender and cbc:DocumentDescription = '##INVOICE-URL##'],GR-R-008-3,fatal,string-length(normalize-space(cac:Attachment/cac:ExternalReference/cbc:URI))>0,"When Supplier is Greek and the INVOICE URL Document reference exists, the External Reference URI should be present"
cac:AccountingSupplierParty/cac:Party[$accountingSupplierCountry='GR' or $accountingSupplierCountry='EL']/cbc:EndpointID,GR-R-009,fatal,./@schemeID='9933' and u:TinVerification(.),Greek suppliers that send an invoice through the PEPPOL network must use a correct TIN number as an electronic address according to PEPPOL Electronic Address Identifier scheme (schemeID 9933).
cac:AccountingCustomerParty[$isGreekSenderandReceiver]/cac:Party/cbc:EndpointID,GR-R-010,fatal,./@schemeID='9933' and u:TinVerification(.),Greek Suppliers that send an invoice through the PEPPOL network to a greek buyer must use a correct TIN number as an electronic address according to PEPPOL Electronic Address Identifier scheme (SchemeID 9933)
/ubl-invoice:Invoice[$isGreekSender] | /ubl-creditnote:CreditNote[$isGreekSender],GR-S-008-1,warning,count(cac:AdditionalDocumentReference[cbc:DocumentDescription = '##INVOICE-URL##'])=1,"When Supplier is Greek, there should be one invoice url"
ubl-creditnote:CreditNote[$SupplierCountry = 'IS'] | ubl-invoice:Invoice[$SupplierCountry = 'IS'],IS-R-001,warning,"( ( not(contains(normalize-space(cbc:InvoiceTypeCode),' ')) and contains( ' 380 381 ',concat(' ',normalize-space(cbc:InvoiceTypeCode),' ') ) ) ) or ( ( not(contains(normalize-space(cbc:CreditNoteTypeCode),' ')) and contains( ' 380 381 ',concat(' ',normalize-space(cbc:CreditNoteTypeCode),' ') ) ) )",If seller is icelandic then invoice type should be 380 or 381 窶 Ef seljandi er ﾃｭslenskur ﾃｾﾃ｡ ﾃｦtti gerﾃｰ reiknings (BT-3) aﾃｰ vera sﾃｶlureikningur (380) eﾃｰa kreditreikningur (381).
ubl-creditnote:CreditNote[$SupplierCountry = 'IS'] | ubl-invoice:Invoice[$SupplierCountry = 'IS'],IS-R-002,fatal,exists(cac:AccountingSupplierParty/cac:Party/cac:PartyLegalEntity/cbc:CompanyID) and cac:AccountingSupplierParty/cac:Party/cac:PartyLegalEntity/cbc:CompanyID/@schemeID = '0196',If seller is icelandic then it shall contain sellers legal id 窶 Ef seljandi er ﾃｭslenskur ﾃｾﾃ｡ skal reikningur innihalda ﾃｭslenska kennitﾃｶlu seljanda (BT-30).
ubl-creditnote:CreditNote[$SupplierCountry = 'IS'] | ubl-invoice:Invoice[$SupplierCountry = 'IS'],IS-R-003,fatal,exists(cac:AccountingSupplierParty/cac:Party/cac:PostalAddress/cbc:StreetName) and exists(cac:AccountingSupplierParty/cac:Party/cac:PostalAddress/cbc:PostalZone),If seller is icelandic then it shall contain his address with street name and zip code 窶 Ef seljandi er ﾃｭslenskur ﾃｾﾃ｡ skal heimilisfang seljanda innihalda gﾃｶtuheiti og pﾃｳstnﾃｺmer (BT-35 og BT-38).
ubl-creditnote:CreditNote[$SupplierCountry = 'IS' and $CustomerCountry = 'IS']/cac:AccountingCustomerParty | ubl-invoice:Invoice[$SupplierCountry = 'IS' and $CustomerCountry = 'IS']/cac:AccountingCustomerParty,IS-R-004,fatal,exists(cac:Party/cac:PartyLegalEntity/cbc:CompanyID) and cac:Party/cac:PartyLegalEntity/cbc:CompanyID/@schemeID = '0196',If seller and buyer are icelandic then the invoice shall contain the buyers icelandic legal identifier 窶 Ef seljandi og kaupandi eru ﾃｭslenskir ﾃｾﾃ｡ skal reikningurinn innihalda ﾃｭslenska kennitﾃｶlu kaupanda (BT-47).
ubl-creditnote:CreditNote[$SupplierCountry = 'IS' and $CustomerCountry = 'IS']/cac:AccountingCustomerParty | ubl-invoice:Invoice[$SupplierCountry = 'IS' and $CustomerCountry = 'IS']/cac:AccountingCustomerParty,IS-R-005,fatal,exists(cac:Party/cac:PostalAddress/cbc:StreetName) and exists(cac:Party/cac:PostalAddress/cbc:PostalZone),If seller and buyer are icelandic then the invoice shall contain the buyers address with street name and zip code  窶 Ef seljandi og kaupandi eru ﾃｭslenskir ﾃｾﾃ｡ skal heimilisfang kaupanda innihalda gﾃｶtuheiti og pﾃｳstnﾃｺmer (BT-50 og BT-53)
ubl-creditnote:CreditNote[$SupplierCountry = 'IS'] | ubl-invoice:Invoice[$SupplierCountry = 'IS'],IS-R-006,fatal,exists(cac:PaymentMeans[cbc:PaymentMeansCode = '9']/cac:PayeeFinancialAccount/cbc:ID) and string-length(normalize-space(cac:PaymentMeans[cbc:PaymentMeansCode = '9']/cac:PayeeFinancialAccount/cbc:ID)) = 12 or not(exists(cac:PaymentMeans[cbc:PaymentMeansCode = '9'])),If seller is icelandic and payment means code is 9 then a 12 digit account id must exist  窶 Ef seljandi er ﾃｭslenskur og greiﾃｰslumﾃ｡ti (BT-81) er millifﾃｦrsla (kﾃｳti 9) ﾃｾﾃ｡ skal koma fram 12 stafa reikningnﾃｺmer (BT-84)
ubl-creditnote:CreditNote[$SupplierCountry = 'IS'] | ubl-invoice:Invoice[$SupplierCountry = 'IS'],IS-R-007,fatal,exists(cac:PaymentMeans[cbc:PaymentMeansCode = '42']/cac:PayeeFinancialAccount/cbc:ID) and string-length(normalize-space(cac:PaymentMeans[cbc:PaymentMeansCode = '42']/cac:PayeeFinancialAccount/cbc:ID)) = 12 or not(exists(cac:PaymentMeans[cbc:PaymentMeansCode = '42'])),If seller is icelandic and payment means code is 42 then a 12 digit account id must exist  窶 Ef seljandi er ﾃｭslenskur og greiﾃｰslumﾃ｡ti (BT-81) er millifﾃｦrsla (kﾃｳti 42) ﾃｾﾃ｡ skal koma fram 12 stafa reikningnﾃｺmer (BT-84)
ubl-creditnote:CreditNote[$SupplierCountry = 'IS'] | ubl-invoice:Invoice[$SupplierCountry = 'IS'],IS-R-008,fatal,(exists(cac:AdditionalDocumentReference[cbc:DocumentDescription = 'EINDAGI']) and string-length(cac:AdditionalDocumentReference[cbc:DocumentDescription = 'EINDAGI']/cbc:ID) = 10 and (string(cac:AdditionalDocumentReference[cbc:DocumentDescription = 'EINDAGI']/cbc:ID) castable as xs:date)) or not(exists(cac:AdditionalDocumentReference[cbc:DocumentDescription = 'EINDAGI'])),"If seller is icelandic and invoice contains supporting description EINDAGI then the id form must be YYYY-MM-DD 窶 Ef seljandi er ﾃｭslenskur ﾃｾﾃ｡ skal eindagi (BT-122, DocumentDescription = EINDAGI) vera ﾃ｡ forminu YYYY-MM-DD."
ubl-creditnote:CreditNote[$SupplierCountry = 'IS'] | ubl-invoice:Invoice[$SupplierCountry = 'IS'],IS-R-009,fatal,(exists(cac:AdditionalDocumentReference[cbc:DocumentDescription = 'EINDAGI']) and exists(cbc:DueDate)) or not(exists(cac:AdditionalDocumentReference[cbc:DocumentDescription = 'EINDAGI'])),"If seller is icelandic and invoice contains supporting description EINDAGI invoice must have due date 窶 Ef seljandi er ﾃｭslenskur ﾃｾﾃ｡ skal reikningur sem inniheldur eindaga (BT-122, DocumentDescription = EINDAGI) einnig hafa gjalddaga (BT-9)."
ubl-creditnote:CreditNote[$SupplierCountry = 'IS'] | ubl-invoice:Invoice[$SupplierCountry = 'IS'],IS-R-010,fatal,(exists(cac:AdditionalDocumentReference[cbc:DocumentDescription = 'EINDAGI']) and (cbc:DueDate) <= (cac:AdditionalDocumentReference[cbc:DocumentDescription = 'EINDAGI']/cbc:ID)) or not(exists(cac:AdditionalDocumentReference[cbc:DocumentDescription = 'EINDAGI'])),"If seller is icelandic and invoice contains supporting description EINDAGI the id date must be same or later than due date 窶 Ef seljandi er ﾃｭslenskur ﾃｾﾃ｡ skal eindagi (BT-122, DocumentDescription = EINDAGI) skal vera sami eﾃｰa sﾃｭﾃｰar en gjalddagi (BT-9) ef eindagi er til staﾃｰar."
cac:AccountingSupplierParty/cac:Party[$supplierCountry = 'IT']/cac:PartyTaxScheme[normalize-space(cac:TaxScheme/cbc:ID) != 'VAT'],IT-R-001,fatal,"matches(normalize-space(cbc:CompanyID),'^[A-Z0-9]{11,16}$')",BT-32 (Seller tax registration identifier) - For Italian suppliers BT-32 minimum length 11 and maximum length shall be 16.  Per i fornitori italiani il BT-32 deve avere una lunghezza tra 11 e 16 caratteri
cac:AccountingSupplierParty/cac:Party[$supplierCountry = 'IT'],IT-R-002,fatal,cac:PostalAddress/cbc:StreetName,BT-35 (Seller address line 1) - Italian suppliers MUST provide the postal address line 1 - I fornitori italiani devono indicare l'indirizzo postale.
cac:AccountingSupplierParty/cac:Party[$supplierCountry = 'IT'],IT-R-003,fatal,cac:PostalAddress/cbc:CityName,BT-37 (Seller city) - Italian suppliers MUST provide the postal address city - I fornitori italiani devono indicare la cittﾃ  di residenza.
cac:AccountingSupplierParty/cac:Party[$supplierCountry = 'IT'],IT-R-004,fatal,cac:PostalAddress/cbc:PostalZone,BT-38 (Seller post code) - Italian suppliers MUST provide the postal address post code - I fornitori italiani devono indicare il CAP di residenza.
cac:AccountingSupplierParty/cac:Party[$supplierCountry = 'NO'],NO-R-001,fatal,"cac:PartyTaxScheme[normalize-space(cac:TaxScheme/cbc:ID) = 'VAT']/substring(cbc:CompanyID, 1, 2)='NO' and matches(cac:PartyTaxScheme[normalize-space(cac:TaxScheme/cbc:ID) = 'VAT']/substring(cbc:CompanyID,3), '^[0-9]{9}MVA$') and u:mod11(substring(cac:PartyTaxScheme[normalize-space(cac:TaxScheme/cbc:ID) = 'VAT']/cbc:CompanyID, 3, 9)) or not(cac:PartyTaxScheme[normalize-space(cac:TaxScheme/cbc:ID) = 'VAT']/substring(cbc:CompanyID, 1, 2)='NO')","For Norwegian suppliers, a VAT number MUST be the country code prefix NO followed by a valid Norwegian organization number (nine numbers) followed by the letters MVA."
cac:AccountingSupplierParty/cac:Party[$supplierCountry = 'NO'],NO-R-002,warning,normalize-space(cac:PartyTaxScheme[normalize-space(cac:TaxScheme/cbc:ID) = 'TAX']/cbc:CompanyID) = 'Foretaksregisteret',"For Norwegian suppliers, most invoice issuers are required to append ""Foretaksregisteret"" to their\n        invoice. """"Dersom selger er aksjeselskap, allmennaksjeselskap eller filial av utenlandsk\n        selskap skal ogsﾃ･ ordet ﾂｫForetaksregisteretﾂｻ fremgﾃ･ av salgsdokumentet, jf.\n        foretaksregisterloven ﾂｧ 10-2."""""""
"//cac:AccountingSupplierParty/cac:Party[cac:PostalAddress/cac:Country/cbc:IdentificationCode = 'SE' and cac:PartyTaxScheme[cac:TaxScheme/cbc:ID = 'VAT']/substring(cbc:CompanyID, 1, 2) = 'SE']",SE-R-001,fatal,string-length(normalize-space(cac:PartyTaxScheme[cac:TaxScheme/cbc:ID = 'VAT']/cbc:CompanyID)) = 14,"For Swedish suppliers, Swedish VAT-numbers must consist of 14 characters."
"//cac:AccountingSupplierParty/cac:Party[cac:PostalAddress/cac:Country/cbc:IdentificationCode = 'SE' and cac:PartyTaxScheme[cac:TaxScheme/cbc:ID = 'VAT']/substring(cbc:CompanyID, 1, 2) = 'SE']",SE-R-002,fatal,"string(number(substring(cac:PartyTaxScheme[cac:TaxScheme/cbc:ID = 'VAT']/cbc:CompanyID, 3, 12))) != 'NaN'","For Swedish suppliers, the Swedish VAT-numbers must have the trailing 12 characters in numeric form"
//cac:AccountingSupplierParty/cac:Party/cac:PartyLegalEntity[../cac:PostalAddress/cac:Country/cbc:IdentificationCode = 'SE' and cbc:CompanyID],SE-R-003,warning,string(number(cbc:CompanyID)) != 'NaN',Swedish organisation numbers should be numeric.
//cac:AccountingSupplierParty/cac:Party/cac:PartyLegalEntity[../cac:PostalAddress/cac:Country/cbc:IdentificationCode = 'SE' and cbc:CompanyID],SE-R-004,warning,string-length(normalize-space(cbc:CompanyID)) = 10,Swedish organisation numbers consist of 10 characters.
//cac:AccountingSupplierParty/cac:Party[cac:PostalAddress/cac:Country/cbc:IdentificationCode = 'SE' and exists(cac:PartyLegalEntity/cbc:CompanyID)]/cac:PartyTaxScheme[normalize-space(upper-case(cac:TaxScheme/cbc:ID)) != 'VAT']/cbc:CompanyID,SE-R-005,fatal,normalize-space(upper-case(.)) = 'GODKﾃНD Fﾃ乏 F-SKATT',"For Swedish suppliers, when using Seller tax registration identifier, 'Godkﾃ､nd fﾃｶr F-skatt' must be stated"
"//cac:TaxCategory[//cac:AccountingSupplierParty/cac:Party[cac:PostalAddress/cac:Country/cbc:IdentificationCode = 'SE' and cac:PartyTaxScheme[cac:TaxScheme/cbc:ID = 'VAT']/substring(cbc:CompanyID, 1, 2) = 'SE'] and cbc:ID = 'S'] | //cac:ClassifiedTaxCategory[//cac:AccountingSupplierParty/cac:Party[cac:PostalAddress/cac:Country/cbc:IdentificationCode = 'SE' and cac:PartyTaxScheme[cac:TaxScheme/cbc:ID = 'VAT']/substring(cbc:CompanyID, 1, 2) = 'SE'] and cbc:ID = 'S']",SE-R-006,fatal,number(cbc:Percent) = 25 or number(cbc:Percent) = 12 or number(cbc:Percent) = 6,"For Swedish suppliers, only standard VAT rate of 6, 12 or 25 are used"
//cac:PaymentMeans[//cac:AccountingSupplierParty/cac:Party[cac:PostalAddress/cac:Country/cbc:IdentificationCode = 'SE'] and normalize-space(cbc:PaymentMeansCode) = '30' and normalize-space(cac:PayeeFinancialAccount/cac:FinancialInstitutionBranch/cbc:ID) = 'SE:PLUSGIRO']/cac:PayeeFinancialAccount/cbc:ID,SE-R-007,warning,string(number(normalize-space(.))) != 'NaN',"For Swedish suppliers using Plusgiro, the Account ID must be numeric"
//cac:PaymentMeans[//cac:AccountingSupplierParty/cac:Party[cac:PostalAddress/cac:Country/cbc:IdentificationCode = 'SE'] and normalize-space(cbc:PaymentMeansCode) = '30' and normalize-space(cac:PayeeFinancialAccount/cac:FinancialInstitutionBranch/cbc:ID) = 'SE:BANKGIRO']/cac:PayeeFinancialAccount/cbc:ID,SE-R-008,warning,string(number(normalize-space(.))) != 'NaN',"For Swedish suppliers using Bankgiro, the Account ID must be numeric"
//cac:PaymentMeans[//cac:AccountingSupplierParty/cac:Party[cac:PostalAddress/cac:Country/cbc:IdentificationCode = 'SE'] and normalize-space(cbc:PaymentMeansCode) = '30' and normalize-space(cac:PayeeFinancialAccount/cac:FinancialInstitutionBranch/cbc:ID) = 'SE:BANKGIRO']/cac:PayeeFinancialAccount/cbc:ID,SE-R-009,warning,string-length(normalize-space(.)) = 7 or string-length(normalize-space(.)) = 8,"For Swedish suppliers using Bankgiro, the Account ID must have 7-8 characters"
//cac:PaymentMeans[//cac:AccountingSupplierParty/cac:Party[cac:PostalAddress/cac:Country/cbc:IdentificationCode = 'SE'] and normalize-space(cbc:PaymentMeansCode) = '30' and normalize-space(cac:PayeeFinancialAccount/cac:FinancialInstitutionBranch/cbc:ID) = 'SE:PLUSGIRO']/cac:PayeeFinancialAccount/cbc:ID,SE-R-010,warning,string-length(normalize-space(.)) >= 2 and string-length(normalize-space(.)) <= 8,"For Swedish suppliers using Plusgiro, the Account ID must have 2-8 characters"
//cac:PaymentMeans[//cac:AccountingSupplierParty/cac:Party[cac:PostalAddress/cac:Country/cbc:IdentificationCode = 'SE'] and (cbc:PaymentMeansCode = normalize-space('50') or cbc:PaymentMeansCode = normalize-space('56'))],SE-R-011,warning,false(),"For Swedish suppliers using Swedish Bankgiro or Plusgiro, the proper way to indicate this is to use Code 30 for PaymentMeans and FinancialInstitutionBranch ID with code SE:BANKGIRO or SE:PLUSGIRO"
//cac:PaymentMeans[//cac:AccountingSupplierParty/cac:Party[cac:PostalAddress/cac:Country/cbc:IdentificationCode = 'SE']  and //cac:AccountingCustomerParty/cac:Party[cac:PostalAddress/cac:Country/cbc:IdentificationCode = 'SE'] and (cbc:PaymentMeansCode = normalize-space('31'))],SE-R-012,warning,false(),"For domestic transactions between Swedish trading partners, credit transfer should be indicated by PaymentMeansCode=""30"""